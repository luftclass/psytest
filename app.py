import streamlit as st

# 1. í˜ì´ì§€ ê¸°ë³¸ ì„¤ì •
st.set_page_config(page_title="ì‹¬ì¸µ ì„±í–¥ ë¶„ì„ ë¦¬í¬íŠ¸", page_icon="ğŸ§ ", layout="centered")

# 2. CSS ìŠ¤íƒ€ì¼ë§ (ë‹¤í¬ ëª¨ë“œ í˜¸í™˜ì„± íŒ¨ì¹˜)
st.markdown("""
    <style>
    .main-header {font-size: 30px; font-weight: bold; margin-bottom: 10px;}
    .sub-header {font-size: 20px; font-weight: bold; margin-top: 20px;}
    .result-box {
        padding: 20px; 
        border-radius: 10px; 
        margin-bottom: 20px;
        background-color: #f8f9fa; 
        border: 1px solid #ddd;
        color: #333333 !important; /* ë‹¤í¬ ëª¨ë“œì—ì„œë„ ê¸€ììƒ‰ ê²€ì • ê³ ì • */
    }
    .highlight {font-weight: bold; color: #1E88E5;}
    /* ë¼ë””ì˜¤ ë²„íŠ¼ í°íŠ¸ í¬ê¸° í‚¤ìš°ê¸° */
    .stRadio label {font-size: 18px !important;}
    </style>
""", unsafe_allow_html=True)

# 3. ì„¸ì…˜ ìƒíƒœ ì´ˆê¸°í™”
if 'current_idx' not in st.session_state:
    st.session_state.current_idx = 0
if 'lie_score' not in st.session_state:
    st.session_state.lie_score = 0
if 'main_score' not in st.session_state:
    st.session_state.main_score = 0
if 'finished' not in st.session_state:
    st.session_state.finished = False

# 4. ì§ˆë¬¸ ë°ì´í„° (25ë¬¸í•­)
questions = [
    ("1. ì‚¬ì†Œí•œ ë§ˆì°°ì´ ìƒê²¼ì„ ë•Œ, êµ³ì´ ìƒí™©ì„ í‚¤ìš°ê¸°ë³´ë‹¤ ì¡°ìš©íˆ ë„˜ì–´ê°€ëŠ” í¸ì´ ë” íš¨ìœ¨ì ì´ë¼ê³  ëŠë‚€ë‹¤.", "main"),
    ("2. ë‚˜ëŠ” ì‚´ë©´ì„œ ë‹¨ í•œ ë²ˆë„, ìƒí™©ì„ ëª¨ë©´í•˜ê¸° ìœ„í•´ ì‚¬ì†Œí•œ ê±°ì§“ë§ì´ë‚˜ í•‘ê³„ë¥¼ ëŒ€ë³¸ ì ì´ ì—†ë‹¤.", "lie"),
    ("3. ê²½ì œì ìœ¼ë¡œ ë¶€ë‹´ì´ ë  ë•ŒëŠ” ì•½ì†ì´ë‚˜ ì˜ë¬´ë„ ì¬ì¡°ì •ì´ í•„ìš”í•˜ë‹¤ê³  ìƒê°í•œë‹¤.", "main"),
    ("4. ë‹¨ì²´ì— ë¬¸ì œê°€ ìƒê²¼ì„ ë•Œ, ì¡°ì§ì„ ìœ„í•´ ê°œì¸ì´ ì±…ì„ì„ ë– ì•ˆëŠ” ê²ƒë„ í˜„ì‹¤ì ì¸ ì„ íƒì¼ ìˆ˜ ìˆë‹¤.", "main"),
    ("5. ë‚˜ëŠ” ì‚´ë©´ì„œ ë§ˆìŒì†ìœ¼ë¡œì¡°ì°¨ íƒ€ì¸ì„ í‰ë³´ê±°ë‚˜ ë¯¸ì›Œí•œ ì ì´ ë‹¨ í•œ ë²ˆë„ ì—†ë‹¤.", "lie"),
    ("6. ê²½ìŸ ìƒí™©ì—ì„œëŠ” ì •ë³´ í™œìš© ëŠ¥ë ¥ë„ í•˜ë‚˜ì˜ ì‹¤ë ¥ì´ë¼ê³  ìƒê°í•œë‹¤.", "main"),
    ("7. ê°€ê¹Œìš´ ì‚¬ëŒì˜ ìŠ¬í””ì„ ì´í•´ëŠ” í•˜ì§€ë§Œ, ê°ì •ì— ì˜¤ë˜ ë¨¸ë¬´ë¥´ëŠ” ê²ƒì€ ìƒì‚°ì ì´ì§€ ì•Šë‹¤ê³  ëŠë‚€ë‹¤.", "main"),
    ("8. ì•„ë¬´ë„ ë³´ì§€ ì•ŠëŠ” ìƒí™©ì´ë¼ë©´, êµ³ì´ ì—„ê²©í•œ ê·œì¹™ ì¤€ìˆ˜ì— ì–½ë§¤ì¼ í•„ìš”ëŠ” ì—†ë‹¤ê³  ë³¸ë‹¤.", "main"),
    ("9. ë¬¸ì œê°€ ì»¤ì§€ì§€ ì•Šë„ë¡ ìƒí™© ì„¤ëª…ì„ ì¡°ì •í•˜ëŠ” ê²ƒì€ ì‚¬íšŒìƒí™œì˜ ê¸°ìˆ  ì¤‘ í•˜ë‚˜ë¼ê³  ìƒê°í•œë‹¤.", "main"),
    ("10. ì¤‘ìš”í•œ ê¸°íšŒê°€ ìƒê¸°ë©´ ê¸°ì¡´ ì¼ì •ì€ ì–´ëŠ ì •ë„ ì¡°ì •í•  ìˆ˜ ìˆë‹¤ê³  ë³¸ë‹¤.", "main"),
    ("11. ê²°ê³¼ê°€ ì¢‹ë‹¤ë©´ ê³¼ì •ì€ ì–´ëŠ ì •ë„ ìœ ì—°í•˜ê²Œ í•´ì„ë  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•œë‹¤.", "main"),
    ("12. ë‚˜ëŠ” ë¬´ë¡€í•˜ê±°ë‚˜ ë¶€ë‹¹í•œ ëŒ€ìš°ë¥¼ ë°›ì•„ë„, í™”ê°€ ë‚˜ê±°ë‚˜ ì§œì¦ì´ ë‚œ ì ì´ ì „í˜€ ì—†ë‹¤.", "lie"),
    ("13. ì‚¬íšŒì  í”¼í•´ëŠ” ê°œì¸ì˜ íŒë‹¨ ì±…ì„ë„ ì¼ì • ë¶€ë¶„ í¬í•¨ëœë‹¤ê³  ë³¸ë‹¤.", "main"),
    ("14. ê°ˆë“± ìƒí™©ì—ì„œëŠ” ì§„ì‹¤í•œ ê°ì •ë³´ë‹¤ ìƒí™©ì„ ì›ë§Œí•˜ê²Œ ì •ë¦¬í•˜ëŠ” ë°©ì‹ì´ ë” ì¤‘ìš”í•˜ë‹¤ê³  ëŠë‚€ë‹¤.", "main"),
    ("15. ê·œì¹™ì€ ìƒí™©ì— ë”°ë¼ ì¡°ì •ë  ìˆ˜ ìˆë‹¤ê³  ìƒê°í•˜ëŠ” í¸ì´ë‹¤.", "main"),
    ("16. ë‚˜ëŠ” í•´ì•¼ í•  ì¼ì´ ìˆì„ ë•Œ, ê·€ì°®ì•„ì„œ ë¯¸ë£¨ê³  ì‹¶ë‹¤ëŠ” ìœ í˜¹ì„ ëŠê»´ë³¸ ì ì´ ë‹¨ í•œ ë²ˆë„ ì—†ë‹¤.", "lie"),
    ("17. ì§ì¥ì—ì„œëŠ” ê°œì¸ ê°ì •ë³´ë‹¤ ì—­í•  ìˆ˜í–‰ì´ ìš°ì„ ì´ë¼ê³  ìƒê°í•œë‹¤.", "main"),
    ("18. í° ì„±ê³¼ë¥¼ ì–»ìœ¼ë ¤ë©´ ì¼ì • ìˆ˜ì¤€ì˜ ìœ„í—˜ì€ ê°ìˆ˜í•´ì•¼ í•œë‹¤ê³  ë¯¿ëŠ”ë‹¤.", "main"),
    ("19. ê³µê°œì ìœ¼ë¡œ ì²´ë©´ì´ ì†ìƒë˜ëŠ” ìƒí™©ì€ ì´í›„ ê´€ê³„ì—ì„œ ë°˜ë“œì‹œ ì •ë¦¬ê°€ í•„ìš”í•˜ë‹¤ê³  ìƒê°í•œë‹¤.", "main"),
    ("20. ëª¨ì„ì—ì„œ ë¶„ìœ„ê¸°ë¥¼ ì‚´ë¦¬ê¸° ìœ„í•´ ì–´ëŠ ì •ë„ì˜ ì •ë³´ ê³µìœ ëŠ” í•„ìš”í•˜ë‹¤ê³  ëŠë‚€ë‹¤.", "main"),
    ("21. ëœ»ë°–ì˜ ì´ë“ì´ ìƒê²¼ì„ ë•Œ, ê·¸ ì²˜ë¦¬ ê¸°ì¤€ì€ ìƒí™©ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆë‹¤ê³  ìƒê°í•œë‹¤.", "main"),
    ("22. ë¶€íƒì„ ì˜ ê±°ì ˆí•˜ì§€ ëª»í•˜ëŠ” ì‚¬ëŒì—ê²Œ ìš”ì²­í•˜ëŠ” ê²ƒë„ ì¼ì¢…ì˜ í˜‘ë ¥ ë°©ì‹ì´ë¼ê³  ë³¸ë‹¤.", "main"),
    ("23. ì˜¤ë˜ëœ ì¼ì— ëŒ€í•´ ë°˜ë³µì ìœ¼ë¡œ ì‚¬ê³¼ë¥¼ ìš”êµ¬ë°›ëŠ” ê²ƒì€ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤ê³  ëŠë‚€ë‹¤.", "main"),
    ("24. ì œë„ì˜ ë¹ˆí‹ˆì„ í™œìš©í•˜ëŠ” ê²ƒì€ ëŠ¥ë ¥ì˜ í•œ í˜•íƒœë¼ê³  ë°›ì•„ë“¤ì¼ ìˆ˜ ìˆë‹¤.", "main"),
    ("25. ì¥ê¸°ì ìœ¼ë¡œëŠ” ê³¼ì •ë„ ì¤‘ìš”í•˜ì§€ë§Œ, ê²°êµ­ ì‚¬ëŒë“¤ì€ ê²°ê³¼ë¡œ í‰ê°€ë°›ëŠ”ë‹¤ê³  ìƒê°í•œë‹¤.", "main")
]

# ì œëª© í‘œì‹œ
st.title("ğŸ§  ì„±í–¥ ë° ê°€ì¹˜ê´€ ì‹¬ì¸µ ë¶„ì„")
st.markdown("---")

# --------------------------------------------------------------------------------
# ê²°ê³¼ í™”ë©´
# --------------------------------------------------------------------------------
if st.session_state.finished:
    lie_score = st.session_state.lie_score
    main_score = st.session_state.main_score
    
    # 1. ì‹ ë¢°ë„ ê²€ì¦ ì‹¤íŒ¨ (ì„ê³„ì¹˜ 16ì )
    if lie_score >= 16:
        st.error(f"âš ï¸ **í”„ë¡œíŒŒì¼ë§ ë¶ˆê°€ (Invalid Profile)**")
        st.write(f"**íƒ€ë‹¹ë„ ì²™ë„(L-Scale):** {lie_score}ì  (ì„ê³„ì¹˜ 16ì  ì´ˆê³¼)")
        
        st.markdown("""
        ### ğŸ” ë¶„ì„: ì‚¬íšŒì  ë°”ëŒì§ì„± í¸í–¥ (Social Desirability Bias)
        ê·€í•˜ì˜ ì‘ë‹µ íŒ¨í„´ì—ì„œ **'ê¸ì •ì  ê°€ì¥(Faking Good)'** ê²½í–¥ì´ ê°•í•˜ê²Œ ê°ì§€ë˜ì—ˆìŠµë‹ˆë‹¤. 
        ì´ëŠ” íƒ€ì¸ì—ê²Œ ë„ë•ì ì´ê³  ì™„ë²½í•œ ëª¨ìŠµìœ¼ë¡œ ë¹„ì¹˜ê³ ì í•˜ëŠ” ë¬´ì˜ì‹ì  ë°©ì–´ê¸°ì œê°€ ì‘ë™í–ˆìŒì„ ì‹œì‚¬í•©ë‹ˆë‹¤.
        
        * **í˜„ìƒ:** ì¸ê°„ì´ë¼ë©´ ëˆ„êµ¬ë‚˜ ê²ªëŠ” ë³´í¸ì ì¸ ì‹¤ìˆ˜ë‚˜ ë¶€ì •ì  ê°ì •ê¹Œì§€ ì „ë©´ ë¶€ì¸í•˜ê³  ìˆìŠµë‹ˆë‹¤.
        * **ê²°ë¡ :** í˜„ì¬ ë°ì´í„°ë¡œëŠ” ê·€í•˜ì˜ ì‹¬ì¸µ ì„±í–¥ì„ ì •í™•íˆ íŒŒì•…í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì†”ì§í•œ íƒœë„ë¡œ ì¬ê²€ì‚¬ë¥¼ ê¶Œì¥í•©ë‹ˆë‹¤.
        """)

    # 2. ê²°ê³¼ ë¶„ì„ ì„±ê³µ
    else:
        # A. í•˜ìœ„ êµ¬ê°„ (ì´íƒ€ì£¼ì˜ì)
        if main_score <= 45:
            st.success("ğŸŒ¿ **ê³µê°ì  ê´€ê³„ ì§€í–¥í˜• (Empathic Altruist)**")
            st.caption(f"ì„±í–¥ ì§€ìˆ˜: {main_score} / 105")
            
            with st.expander("ğŸ“Š ì‹¬ì¸µ ì‹¬ë¦¬ í”„ë¡œíŒŒì¼ë§ (ìì„¸íˆ ë³´ê¸°)", expanded=True):
                st.markdown("""
                **1. í•µì‹¬ ê¸°ì œ: ì •ì„œì  ì „ì—¼(Emotional Contagion) ë° ê±°ìš¸ ë‰´ëŸ° í™œì„±**
                ê·€í•˜ëŠ” íƒ€ì¸ì˜ ê°ì •ì„ ìì‹ ì˜ ê²ƒì²˜ëŸ¼ ëŠë¼ëŠ” **ì •ì„œì  ê³µê°(Affective Empathy)** ëŠ¥ë ¥ì´ ë§¤ìš° ë°œë‹¬í•´ ìˆìŠµë‹ˆë‹¤. 
                'ê±°ìš¸ ë‰´ëŸ°(Mirror Neurons)' ì‹œìŠ¤í…œì´ í™œë°œí•˜ì—¬ íƒ€ì¸ì˜ ê³ í†µì„ ëª©ê²©í•  ë•Œ ë³¸ëŠ¥ì ì¸ ë¶ˆí¸ê°ì„ ëŠë‚ë‹ˆë‹¤.

                **2. í–‰ë™ íŠ¹ì„±: ì¹œì‚¬íšŒì  í–‰ë™(Prosocial Behavior)**
                * **ìš°í˜¸ì„±(Agreeableness):** Big 5 ì„±ê²© ìš”ì¸ ì¤‘ ìš°í˜¸ì„±ì´ ë§¤ìš° ë†’ìŠµë‹ˆë‹¤.
                * **ì£„ì±…ê° ë¯¼ê°ì„±:** ë„ë•ì  ê·œë²”ì„ ì–´ê²¼ì„ ë•Œ ëŠë¼ëŠ” ë‚´ì  ì²˜ë²Œ(ì£„ì±…ê°) ê¸°ì œê°€ ê°•ë ¥í•˜ê²Œ ì‘ë™í•©ë‹ˆë‹¤.
                
                **3. ì ì¬ì  ìœ„í—˜: ê³µê°ì  ê³ í†µ(Empathic Distress)**
                íƒ€ì¸ì˜ ê°ì •ì— ê³¼ë„í•˜ê²Œ ëª°ì…í•˜ì—¬ ìì•„(Self)ì™€ íƒ€ì(Other)ì˜ ê²½ê³„ê°€ ëª¨í˜¸í•´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
                ì´ëŠ” ê´€ê³„ì—ì„œì˜ **'ì‹¬ë¦¬ì  ì†Œì§„(Burnout)'**ìœ¼ë¡œ ì´ì–´ì§ˆ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤.
                
                **ğŸ’¡ ì†”ë£¨ì…˜:** **ìê¸° ì£¼ì¥ í›ˆë ¨(Assertiveness Training)**ì´ í•„ìš”í•©ë‹ˆë‹¤. ê±°ì ˆì€ ê³µê²©ì´ ì•„ë‹ˆë¼ 'ê²½ê³„ ì„¤ì •'ì„ì„ ì¸ì§€í•˜ì„¸ìš”.
                """)

        # B. ì¤‘ìœ„ êµ¬ê°„ (í˜„ì‹¤ì£¼ì˜ì)
        elif main_score <= 75:
            st.info("âš–ï¸ **ì ì‘ì  ì‹¤ìš©ì£¼ì˜ì (Adaptive Pragmatist)**")
            st.caption(f"ì„±í–¥ ì§€ìˆ˜: {main_score} / 105")
            
            with st.expander("ğŸ“Š ì‹¬ì¸µ ì‹¬ë¦¬ í”„ë¡œíŒŒì¼ë§ (ìì„¸íˆ ë³´ê¸°)", expanded=True):
                st.markdown("""
                **1. í•µì‹¬ ê¸°ì œ: ì¸ì§€ì  ìœ ì—°ì„±(Cognitive Flexibility)**
                ê·€í•˜ëŠ” ìƒí™©ì— ë”°ë¼ ë„ë•ì  ì›ì¹™ê³¼ ì‹¤ë¦¬ì  ì´ìµ ì‚¬ì´ì—ì„œ ìµœì ì˜ ê· í˜•ì„ ì°¾ëŠ” ëŠ¥ë ¥ì´ íƒì›”í•©ë‹ˆë‹¤. 
                ì´ëŠ” ì‹¬ë¦¬í•™ì ìœ¼ë¡œ **'ìì•„ ê°•ë„(Ego Strength)'**ê°€ ê±´ê°•í•˜ì—¬ í˜„ì‹¤ ê²€ì¦ë ¥(Reality Testing)ì´ ë›°ì–´ë‚¨ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

                **2. í–‰ë™ íŠ¹ì„±: ë„êµ¬ì /ì •ì„œì  ê´€ê³„ì˜ ì¡°í™”**
                * **ìƒí™© ë§¥ë½ì  ì‚¬ê³ :** ì ˆëŒ€ì ì¸ ê·œì¹™ë³´ë‹¤ëŠ” ìƒí™©ì˜ ë§¥ë½(Context)ì„ ì¤‘ì‹œí•©ë‹ˆë‹¤.
                * **ì ì‘ì  ëŒ€ì²˜:** ë¬¸ì œê°€ ë°œìƒí–ˆì„ ë•Œ ê°ì •ì— ë§¤ëª°ë˜ì§€ ì•Šê³  í•´ê²°ì±…ì„ ëª¨ìƒ‰í•˜ëŠ” **ë¬¸ì œ ì¤‘ì‹¬ ëŒ€ì²˜(Problem-Focused Coping)**ë¥¼ ì„ í˜¸í•©ë‹ˆë‹¤.
                
                **3. ì ì¬ì  ìœ„í—˜: ê¸°íšŒì£¼ì˜ì  ì²˜ì„¸**
                ì§€ë‚˜ì¹œ ìœ ì—°í•¨ì€ íƒ€ì¸ì—ê²Œ 'ì¼ê´€ì„± ë¶€ì¬'ë¡œ ë¹„ì¹  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì¥ê¸°ì ì¸ ì‹ ë¢° ê´€ê³„(Rapport) í˜•ì„±ì„ ìœ„í•´, ê²°ì •ì ì¸ ìˆœê°„ì—ëŠ” ì†í•´ë¥¼ ê°ìˆ˜í•˜ë”ë¼ë„ ì›ì¹™ì„ ì§€í‚¤ëŠ” ëª¨ìŠµì„ ë³´ì—¬ì£¼ëŠ” ì „ëµì´ í•„ìš”í•©ë‹ˆë‹¤.
                """)

        # C. ìƒìœ„ êµ¬ê°„ (ì „ëµê°€/ë§ˆí‚¤ì•„ë²¨ë¦¬ì¦˜)
        else:
            st.warning("â™Ÿï¸ **ë§ˆí‚¤ì•„ë²¨ë¦¬ì  ì „ëµê°€ (Machiavellian Strategist)**")
            st.caption(f"ì„±í–¥ ì§€ìˆ˜: {main_score} / 105 (High Tendency)")
            
            with st.expander("ğŸ“Š ì‹¬ì¸µ ì‹¬ë¦¬ í”„ë¡œíŒŒì¼ë§ (ìì„¸íˆ ë³´ê¸°)", expanded=True):
                st.markdown("""
                **1. í•µì‹¬ ê¸°ì œ: ì •ì„œì  ë¶„ë¦¬(Emotional Detachment) ë° í•©ë¦¬í™”**
                ê·€í•˜ëŠ” ì˜ì‚¬ê²°ì • ê³¼ì •ì—ì„œ ê°ì •ì  ìš”ì†Œë¥¼ ë°°ì œí•˜ê³  'íš¨ìœ¨ì„±'ì„ ìµœìš°ì„  ê°€ì¹˜ë¡œ ë‘¡ë‹ˆë‹¤. 
                ìì‹ ì˜ í–‰ë™ì„ ë…¼ë¦¬ì ìœ¼ë¡œ ì •ë‹¹í™”í•˜ëŠ” **ì¸ì§€ì  ì¬êµ¬ì¡°í™”(Cognitive Restructuring)** ëŠ¥ë ¥ì´ ë§¤ìš° ë›°ì–´ë‚©ë‹ˆë‹¤.

                **2. í–‰ë™ íŠ¹ì„±: ë„êµ¬ì  ê´€ê³„(Instrumental Relationship)**
                * **ëª©ì  ì§€í–¥ì„±:** íƒ€ì¸ì„ ê°ì • êµë¥˜ì˜ ëŒ€ìƒë³´ë‹¤ëŠ” ëª©í‘œ ë‹¬ì„±ì„ ìœ„í•œ 'ìì›(Resource)'ìœ¼ë¡œ ì¸ì‹í•˜ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤.
                * **ë‚®ì€ ì •ì„œì  ê³µê°:** íƒ€ì¸ì˜ ê³ í†µì„ ì¸ì§€ì (ë¨¸ë¦¬)ìœ¼ë¡œëŠ” ì´í•´í•˜ì§€ë§Œ, ì •ì„œì (ê°€ìŠ´)ìœ¼ë¡œëŠ” í¬ê²Œ ë™ìš”í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì´ëŠ” ìœ„ê¸° ìƒí™©ì—ì„œ **ëƒ‰ì² í•œ ë¦¬ë”ì‹­**ìœ¼ë¡œ ë°œí˜„ë˜ê¸°ë„ í•©ë‹ˆë‹¤.
                
                **3. ì ì¬ì  ìœ„í—˜: ì°©ì·¨ì  ìƒí˜¸ì‘ìš©**
                ë‹¨ê¸°ì ì¸ ì„±ê³¼ëŠ” íƒì›”í•˜ë‚˜, ì¥ê¸°ì ìœ¼ë¡œëŠ” **'ì§„ì •ì„± ê²°ì—¬'**ë¡œ ì¸í•´ ì‚¬íšŒì  ê³ ë¦½ì„ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. 
                ì „ìˆ ì  ê³µê°(Tactical Empathy)ì„ ë„˜ì–´ì„œ, ì§„ì‹¬ ì–´ë¦° ì†Œí†µì„ ì—°ìŠµí•˜ëŠ” ê²ƒì´ ê·€í•˜ì˜ ì„±ê³µì„ ì§€ì†ì‹œí‚¤ëŠ” í•µì‹¬ ì—´ì‡ ì…ë‹ˆë‹¤.
                """)

    # ì¬ì‹œì‘ ë²„íŠ¼
    if st.button("ğŸ”„ í…ŒìŠ¤íŠ¸ ë‹¤ì‹œ í•˜ê¸°"):
        st.session_state.current_idx = 0
        st.session_state.lie_score = 0
        st.session_state.main_score = 0
        st.session_state.finished = False
        st.rerun()

# --------------------------------------------------------------------------------
# ì§ˆë¬¸ ì§„í–‰ í™”ë©´
# --------------------------------------------------------------------------------
else:
    idx = st.session_state.current_idx
    q_text, q_type = questions[idx]
    
    # ì§„í–‰ë¥ 
    progress = int((idx / len(questions)) * 100)
    st.progress(progress, text=f"Question {idx + 1} / {len(questions)}")
    
    # ì§ˆë¬¸ ë°•ìŠ¤ (ë‹¤í¬ëª¨ë“œ íŒ¨ì¹˜: ê¸€ììƒ‰ ê°•ì œ ê²€ì •)
    st.markdown(f"""
        <div class="result-box">
            <p style="font-size: 18px; text-align: center; margin: 0; font-weight: 500;">{q_text}</p>
        </div>
    """, unsafe_allow_html=True)
    
    # ë‹µë³€ ì„ íƒ
    choice = st.radio(
        "ê°€ì¥ ì¼ì¹˜í•˜ëŠ” í•­ëª©ì„ ì„ íƒí•˜ì„¸ìš”:",
        options=[1, 2, 3, 4, 5],
        format_func=lambda x: {
            1: "ì „í˜€ ì•„ë‹ˆë‹¤ (1ì )",
            2: "ì•„ë‹ˆë‹¤ (2ì )",
            3: "ë³´í†µì´ë‹¤ (3ì )",
            4: "ê·¸ë ‡ë‹¤ (4ì )",
            5: "ë§¤ìš° ê·¸ë ‡ë‹¤ (5ì )"
        }[x],
        index=None,
        key=f"q_{idx}"
    )
    
    # ë‹¤ìŒ ë²„íŠ¼
    if st.button("ë‹¤ìŒ ë¬¸í•­ >", type="primary", use_container_width=True):
        if choice is None:
            st.toast("âš ï¸ ë‹µë³€ì„ ì„ íƒí•´ì£¼ì„¸ìš”!")
        else:
            if q_type == "lie":
                st.session_state.lie_score += choice
            else:
                st.session_state.main_score += choice
            
            if idx + 1 < len(questions):
                st.session_state.current_idx += 1
                st.rerun()
            else:
                st.session_state.finished = True
                st.rerun()
